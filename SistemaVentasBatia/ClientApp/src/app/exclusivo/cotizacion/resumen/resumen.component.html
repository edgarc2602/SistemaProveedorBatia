<style>
    .btn-bottom-right {
        position: absolute;
        bottom: 80px; /* Puedes ajustar la distancia desde la parte inferior */
        right: 30px; /* Puedes ajustar la distancia desde la derecha */
    }
</style>
<div [@fadeInOut]>
    <meta charset="UTF-8">
    <br />
    <link rel="stylesheet" type="text/css" href="/ClientApp/src/app/exclusivo/cotizacion/resumen/Effects.css">
    <div class="pt-1 mb-1">

        <h2 class="text-black-90">Cotización {{model.nombreComercial}}</h2>
        <div class="row">
            <div class="col-6 col-md-6">
                <h6 class="text-black-50">Id: {{model.idCotizacion}}</h6>
            </div>
            <div class="col-6 col-md-6 float-end">
                <h6 class="text-black-50 float-end">Id original: {{model.idCotizacionOriginal}}</h6>
            </div>
        </div>







        <!--<div class="float-end">
            <h6 class="text-black-50">Id cotizacion original: {{model.idCotizacionOriginal}}</h6>
        </div>-->
    </div>


    <ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <button type="button" (click)="existe(model.idCotizacion)" class="nav-link active" data-bs-toggle="tab"
                    data-bs-target="#resumen" role="tab" aria-controls="resumen"
                    aria-selected="true">
                Resumen
            </button>
        </li>
        <li class="nav-item">
            <button type="button" class="nav-link" data-bs-toggle="tab"
                    data-bs-target="#prospecto" role="tab" aria-controls="prospecto"
                    aria-selected="false">
                Prospecto
            </button>
        </li>
        <li class="nav-item">
            <button type="button" class="nav-link" data-bs-toggle="tab"
                    data-bs-target="#directorio" role="tab" aria-controls="directorio"
                    aria-selected="false">
                Directorio
            </button>
        </li>
        <li class="nav-item">
            <button type="button" class="nav-link" (click)="getPlan()" data-bs-toggle="tab"
                    data-bs-target="#plantilla" role="tab" aria-controls="plantilla"
                    aria-selected="false">
                Plantilla
            </button>
        </li>
        <li class="nav-item">
            <button type="button" class="nav-link" data-bs-toggle="tab" (click)="getMat('material')"
                    data-bs-target="#material" role="tab" aria-controls="material"
                    aria-selected="false">
                Material
            </button>
        </li>
        <li class="nav-item">
            <button type="button" class="nav-link" data-bs-toggle="tab" (click)="getMat('uniforme')"
                    data-bs-target="#material" role="tab" aria-controls="uniforme"
                    aria-selected="false">
                Uniforme
            </button>
        </li>
        <li class="nav-item">
            <button type="button" class="nav-link" data-bs-toggle="tab" (click)="getMat('equipo')"
                    data-bs-target="#material" role="tab" aria-controls="equipo"
                    aria-selected="false">
                Equipo
            </button>
        </li>
        <li class="nav-item">
            <button type="button" class="nav-link" data-bs-toggle="tab" (click)="getMat('herramienta')"
                    data-bs-target="#material" role="tab" aria-controls="herramienta"
                    aria-selected="false">
                Herramienta
            </button>
        </li>
        <li class="nav-item">
            <button type="button" class="nav-link" (click)="getServ()" data-bs-toggle="tab"
                    data-bs-target="#servicio" role="tab" aria-controls="servicio"
                    aria-selected="false">
                Servicio
            </button>
        </li>
    </ul>
    <br />

    <div class="tab-content">
        <div class="tab-pane fade show active" id="resumen" role="tabpanel" aria-labelledby="resumen-tab">
            <div class="row" style="border-radius: 10px; overflow-x: hidden;">
                <table class="table table-borderless table-responsive">
                    <thead>
                        <tr class="bg-primary bg-opacity-75 text-white">
                            <th class="ps-2 text-center">Lista de Conceptos</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Mano de obra</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ model.salario | number: '1.2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Provisiones</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ model.provisiones | number: '1.2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Carga Social</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ model.cargaSocial | number: '1.2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Materiales</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ model.material | number: '1.2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Uniformes</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ model.uniforme | number: '1.2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Equipos</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ model.equipo | number: '1.2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Herramientas</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ model.herramienta | number: '1.2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom border-success">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Servicios</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ model.servicio | number: '1.2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start text-success"><h5>Total CD</h5></div>
                                    <div class="col-4 col-md-3 text-end text-success"><h5>${{ model.subTotal | number:'1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom border-success">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-4 col-md-3  text-start"><h5>Costo Indirecto (%)</h5></div>
                                    <div class="col-2 col-md-1">
                                        <input #indirectotxt type="text" class="form-control aliggn-content-start box-shadow" id="indirectoPor" name="indirecto" [(ngModel)]="indirectoValue" value="{{model.indirectoPor}}" placeholder="{{model.indirectoPor}}" autocomplete="off" required>
                                    </div>
                                    <div class="col-4 col-md-2 text-end"><h5>${{ model.indirecto | number:'1.2-2'}}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start text-success"><h5>Total CI</h5></div>
                                    <div class="col-4 col-md-3 text-end text-success"><h5>${{ model.subTotal + model.indirecto | number:'1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom border-success">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-4 col-md-3 text-start"><h5>Utilidad (%)</h5></div>
                                    <div class="col-2 col-md-1">
                                        <input #utilidadtxt type="text" class="form-control box-shadow" id="utilidad" name="utilidadPor" [(ngModel)]="utilidadValue" (input)="validarSoloNumeros(utilidadValue)" value="{{model.utilidadPor}}" placeholder="{{model.utilidadPor}}" autocomplete="off" required>
                                    </div>
                                    <div class="col-4 col-md-2  text-end"><h5>${{ model.utilidad | number:'1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start text-success"><h5>Total U</h5></div>
                                    <div class="col-4 col-md-3 text-end text-success"><h5>${{ model.subTotal + model.indirecto + model.utilidad | number:'1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom border-success">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-4 col-md-3 text-start"><h5>Comision Sobre Venta (%)</h5></div>
                                    <div class="col-2 col-md-1 ">
                                        <input #CSVtxt type="text" class="form-control box-shadow" id="CSV" name="CSV" [(ngModel)]="CSV" (input)="validarSoloNumeros(utilidadValue)" value="{{model.csvPor}}" placeholder="{{model.csvPor}}" autocomplete="off" required>
                                    </div>
                                    <div class="col-4 col-md-2 text-end"><h5>${{ model.comisionSV | number:'1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start text-success"><h5>Total CSV</h5></div>
                                    <div class="col-4 col-md-3 text-end text-success"><h5>${{ (model.subTotal + model.indirecto + model.utilidad + model.comisionSV) | number:'1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>


                        <tr>
                            <td class="border-bottom border-success">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-4 col-md-3 text-start"><h5>Comision Externa (%)</h5></div>
                                    <div class="col-2 col-md-1 ">
                                        <input #comisionExttxt type="text" class="form-control box-shadow" id="comisionExt" name="comisionExt" [(ngModel)]="ComisionExtValue" (input)="validarSoloNumeros(utilidadValue)" value="{{model.comisionExtPor}}" placeholder="{{model.comisionExtPor}}" autocomplete="off" required>
                                    </div>
                                    <div class="col-4 col-md-2  text-end"><h5>${{ model.comisionExt | number:'1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start text-success"><h5>Total CE</h5></div>
                                    <div class="col-4 col-md-3 text-end text-success"><h5>${{ (model.subTotal + model.indirecto + model.utilidad + model.comisionSV + model.comisionExt) | number:'1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>








                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-3 col-md-3 offset-3 text-start"><h4>Total</h4></div>
                                    <!--<div class="col-3  text-end"><h5>   { model.total | number: '1.2' }   </h5></div>-->
                                    <div class="col-3 col-md-3 text-end"><h4>${{ model.subTotal + model.indirecto + model.utilidad + model.comisionSV + model.comisionExt | number:'1.2-2' }}</h4></div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div>
                <form id="forcotupd">
                    <div class="row">
                        <div class="col-3">

                        </div>
                        <div *ngIf="autorizacion === 1" class="col-4">
                            <button type="submit" class="btn btn-outline-info box-shadow" (click)="actualizarIndirectoUtilidad()">Actualizar %</button><br><br>
                            <!--<button type="submit" class="btn btn-outline-success" (click)="validaActualizacionCotizacion()">Actualizar</button><br><br>-->
                        </div>
                        <div class="col-2">

                        </div>

                    </div>
                </form>
                <br />
                <div class="row">
                    <div class="col-md-2">

                    </div>
                    <div class="col-4 col-md-3  col-3">
                        <button type="button" id="miBoton1" (click)="descargarCotizacionComponent(2)" class="btn btn-outline-info"><i class="fa-solid fa-download"></i> Propuesta Economica</button>
                        <span style="margin-left: 10px;"></span>
                        <script src="../../cotizacion/resumen/"></script>
                    </div>
                    <div class="col-4 float-end col-md-3">
                        <button type="button" id="miBoton2" (click)="descargarCotizacionComponent(1)" class="btn btn-outline-info "><i class="fa-solid fa-download"></i> Propuesta Técnica</button>
                        <span style="margin-right: 10px;"></span>
                    </div>
                    <div class="col-4">
                        <button type="button" (click)="elige(model.idCotizacion)" class="btn btn-outline-success "><i class="fa-solid fa-copy"></i> Duplicar Cotización</button>
                        <!--<button type="submit" class="btn btn-outline-info" (click)="descargarCotizacion()">Descargar cotización</button><br><br>-->
                    </div>
                </div>


                <br />
                <br />



                <script src="script.js"></script>



            </div>
        </div>



        <div class="tab-pane fade" id="prospecto" role="tabpanel" aria-labelledby="resumen-tab">
            <pros-widget [idP]="model.idProspecto" (smEvent)="savePros($event)"></pros-widget>
            <br />
            <br />
        </div>



        <div class="tab-pane fade" id="directorio" role="tabpanel" aria-labelledby="resumen-tab">
            <div class="row">
                <div class="col-5 col-sm-6 col-md-5 text-black-50 ">
                    Seleccionar una dirección existente
                </div>
                <div class="col-1 col-md-1">

                </div>
                <div class=" col-6 col-sm-12 col-md-4 text-black-50 text-start">
                    Agregar una nueva dirección
                </div>
            </div>
            <br>
            <div class="row pb-3">
                <div class="col-5 col-sm-12 col-md-4">
                    <div class="form-floating">
                        <select class="form-select" [(ngModel)]="modelDir.idDireccion" aria-label="IdTIpoInmueble" id="IdDireccion">
                            <option *ngFor="let d of dirs" [ngValue]="d.id">{{ d.nom }}</option>
                        </select>
                        <label asp-for="IdDireccion">Sucursal</label>
                    </div>
                    <span asp-validation-for="IdDireccion" class="text-danger"></span>
                </div>
                <div class="col-md-1 col-1">

                </div>

                <div class="col-6 col-sm-12 col-md-3 offset-md-1 text-center ">
                    <div class="btn-group">
                        <button type="button" (click)="getNewDir()" class="btn btn-outline-primary box-shadow" id="btnAgregarDireccion"><i class="fa-solid fa-plus"></i> Nueva Dirección</button>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-4 col-sm-12 col-md-2">
                    <button type="button" (click)="addDir()" class="btn btn-outline-success"><i class="fa-solid fa-plus"></i> Agregar</button>
                </div>
            </div>

            <br />
            <div class="row">
                <div *ngFor="let dr of lsdir.direcciones" class="col-sm-12 col-md-6 mb-2">
                    <div class="card">
                        <div class="card-header bg-light"><h6>{{ dr.nombreSucursal }} ({{ dr.tipoInmueble }})</h6></div>
                        <div class="card-body">
                            <div class="d-flex bd-highlight mb-3">
                                <div class="bd-highlight">
                                    {{ dr.domicilioCompleto }}
                                </div>
                                <div class="ms-auto bd-highlight">
                                    <button type="button" class="btn btn-sm text-primary mb-1" (click)="getExistDir(dr.idDireccion)" data-bs-toggle="tooltip" title="Editar">
                                        <i class="fa-solid fa-pencil fa-2x"></i>
                                    </button>
                                    <button type="button" class="btn btn-sm text-danger mb-1" (click)="validaDireccionCotizacion(dr.idDireccionCotizacion)" data-bs-toggle="tooltip" title="Eliminar">
                                        <i class="fa-solid fa-times fa-2x"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <br />
            <br />
            <br />
        </div>
        <div class="tab-pane fade " id="plantilla" role="tabpanel" aria-labelledby="plantilla-tab">
            <div class="d-flex flex-row-reverse">
                <h5><i class="bi bi-people-fill"></i><span class="badge bg-primary ">No. Empleados: {{lspue.empleados}}  </span></h5>
                <h5 class="me-1"><span class="badge bg-primary ">Importe mensual: $ {{ model.subTotal + model.indirecto + model.utilidad + model.comisionSV + model.comisionExt | number: '1.2' }}</span></h5>
            </div>
            <div id="accordion" *ngFor="let dir of lspue.direccionesCotizacion">
                <div class="card box-shadow">
                    <div class="card-header bg-primary bg-opacity-75">
                        <div class="row ">
                            <div class="col-md-3 pt-2">
                                <a id="aListaOperarios{{ dir.idDireccionCotizacion }}" class="btn text-white" data-bs-toggle="collapse" href="#dvPuestosDireccion{{ dir.idDireccionCotizacion }}">
                                    <h5 style="margin-bottom:0;">
                                        {{ dir.nombreSucursal }}
                                    </h5>
                                </a>
                            </div>
                            <div class="col-md-3">
                            </div>
                            <div class="col-md-3">
                            </div>
                            <div class="col-md-3">
                                <div class="float-end text-primary mt-2" style="cursor:pointer;" data-bs-toggle="tooltip" title="Agregar operario">
                                    <a (click)="addPlan(dir.idDireccionCotizacion, dir.idTabulador)" class="agrega-puesto">
                                        <i class="fa-solid fa-user-plus fa-3x" style="color: white; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <span class="badge bg-primary ms-2 ">{{ dir.ciudad }}, {{ dir.estado }}</span>
                            </div>
                        </div>
                    </div>
                    <div id="dvPuestosDireccion{{ dir.idDireccionCotizacion }}" class="collapse show" data-bs-parent="#accordion">

                        <div class="card-body">

                            <div style="border-radius: 10px; overflow-x: hidden;">
                                <table class="table table-borderless table-responsive" id="tbOperarios">
                                    <tbody>
                                        <tr *ngFor="let pt of filtroPlan(dir.idDireccionCotizacion)" id="tr{{ pt.idPuestoDireccionCotizacion }}">
                                            <td>
                                                <div class="row pb-3">
                                                    <div class="col-8 col-sm-2">
                                                        <span class="badge text-dark">Puesto:</span>
                                                        <div class="ms-1">{{ pt.puesto }}</div>
                                                    </div>
                                                    <div class="col-3 col-sm-2 ">
                                                        <span class="badge text-dark">Cantidad:</span>
                                                        <div class="ms-4">{{ pt.cantidad }}</div>
                                                    </div>
                                                    <div class="col-8 col-sm-4">
                                                        <span class="badge text-dark">Horario:</span>
                                                        <div class="ms-1">{{ pt.diaInicio }} a {{ pt.diaFin }} de {{ pt.hrInicio.substring(0, 5) }} a {{ pt.hrFin.substring(0, 5) }} hrs</div>
                                                    </div>
                                                    <div class="col-3 col-sm-2">
                                                        <span class="badge text-dark">Jornada:</span>
                                                        <div class="ms-3">{{ pt.jornada }} hrs</div>
                                                    </div>
                                                    <div class="col-4 col-sm-2">
                                                        <span class="badge text-dark">Turno:</span>
                                                        <div class="ms-1">{{ pt.turno }}</div>
                                                    </div>
                                                    <div class="col-4 col-sm-2">
                                                        <span class="badge text-dark">Salario:</span>
                                                        <div class="ms-1">$ {{ pt.sueldo | number: '0.2' }}</div>
                                                    </div>
                                                    <div class="col-4 col-sm-2">
                                                        <span class="badge text-dark">Aguinaldo:</span>
                                                        <div class="ms-1">$ {{ pt.aguinaldo | number: '0.2' }}</div>
                                                    </div>
                                                    <div class="col-4 col-sm-2">
                                                        <span class="badge text-dark">Prima Vacacional:</span>
                                                        <div class="ms-1">$ {{ pt.primaVacacional }}</div>
                                                    </div>
                                                    <div class="col-4 col-sm-2">
                                                        <span class="badge text-dark">ISN:</span>
                                                        <div class="ms-1">$ {{ pt.isn | number: '0.2' }}</div>
                                                    </div>
                                                    <div class="col-4 col-sm-2">
                                                        <span class="badge text-dark">IMSS:</span>
                                                        <div class="ms-1">$ {{ pt.imss | number: '0.2' }}</div>
                                                    </div>
                                                    <div class="col-6 col-sm-2">
                                                        <span class="badge text-dark">Total:</span>
                                                        <div class="ms-1">$ {{ pt.total | number: '0.2' }}</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="align-middle w-auto">
                                                <div class="float-end">
                                                    <a class="btn btn-sm text-secondary mb-1" (click)="getMatPues(pt.idPuestoDireccionCotizacion, dir.idDireccionCotizacion, 'material')" data-bs-toggle="tooltip" title="Material">
                                                        <i class="fa-solid fa-pump-soap fa-2x"></i>
                                                        <!--<i class="fa-solid fa-pump-soap fa-2x" style="color: darkseagreen; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);"></i>-->
                                                    </a>
                                                    <a class="btn btn-sm text-info mb-1" (click)="getMatPues(pt.idPuestoDireccionCotizacion, dir.idDireccionCotizacion, 'uniforme')" data-bs-toggle="tooltip" title="Uniforme">
                                                        <i class="fa-solid fa-shirt fa-2x"></i>
                                                        <!--<i class="fa-solid fa-shirt fa-2x" style="color: deepskyblue; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);"></i>-->
                                                    </a>
                                                    <a class="btn btn-sm text-success mb-1" (click)="getMatPues(pt.idPuestoDireccionCotizacion, dir.idDireccionCotizacion, 'equipo')" data-bs-toggle="tooltip" title="Equipo">
                                                        <i class="fa-solid fa-helmet-safety fa-2x"></i>
                                                        <!--<i class="fa-solid fa-helmet-safety fa-2x" style="color: darkgreen; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);"></i>-->
                                                    </a>
                                                    <a class="btn btn-sm text-danger mb-1" (click)="getMatPues(pt.idPuestoDireccionCotizacion, dir.idDireccionCotizacion, 'herramienta')" data-bs-toggle="tooltip" title="Herramienta">
                                                        <i class="fa-solid fa-hammer fa-2x"></i>
                                                        <!--<i class="fa-solid fa-hammer fa-2x" style="color: yellowgreen; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);"></i>-->
                                                    </a>
                                                    <a class="btn btn-sm text-danger mb-1" (click)="eligeOperario(pt.idPuestoDireccionCotizacion)" title="Descartar">
                                                        <i class="fa-solid fa-times fa-2x"></i>
                                                        <!--<i class="fa-solid fa-times fa-2x" style="color: red; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);"></i>-->
                                                    </a>
                                                    <a class="btn btn-sm text-primary mb-1" (click)="updPlan(pt.idPuestoDireccionCotizacion, dir.idTabulador)" data-bs-toggle="tooltip" title="Editar">
                                                        <i class="fa-solid fa-pencil fa-2x"></i>
                                                        <!--<i class="fa-solid fa-pencil fa-2x" style="color: blue; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);"></i>-->
                                                    </a>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <br />
            <br />
            <br />
        </div>
        <div class="tab-pane fade" id="material" role="tabpanel" aria-labelledby="plantilla-tab">
            <div>
                <div class="row">
                    <div class="col-md-3">
                        <div class="form-floating  mb-3">
                            <input type="text" class="form-control" [(ngModel)]="txtMatKey" asp-for="Keywords" placeholder="Escriba un nombre">
                            <label asp-for="Keywords">Producto</label>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-floating mb-3">
                            <select class="form-select" [(ngModel)]="selMatDir" asp-for="IdDireccionCotizacion" aria-label="IdDireccionCotizacion">
                                <option value="0" selected>Selecciona una opción...</option>
                                <option *ngFor="let dm of cotdirs" [ngValue]="dm.id">{{ dm.descripcion }}</option>
                            </select>
                            <label for="ddlServicio">Sucursal</label>
                        </div>
                    </div>
                    <!--<div class="col-md-3">
                        <div class="form-floating">
                            <select class="form-select" [(ngModel)]="selMatPue" asp-for="IdPuestoDireccionCotizacion" aria-label="IdEstatusCotizacion">
                                <option value="0" selected>Selecciona una opción...</option>
                                <option *ngFor="let pm of lspue.puestosDireccionesCotizacion" [ngValue]="pm.idPuestoDireccionCotizacion">{{ pm.puesto }}</option>
                            </select>
                            <label for="ddlServicio">Puesto</label>
                        </div>
                    </div>-->

                    <div class="col-md-6 mb-3">
                        <button type="button" (click)="getMat(selTipo)" class="btn btn-outline-primary mb-3"><i class="fa-solid fa-search"></i> Buscar</button>
                        <button type="button" (click)="getNewMat(selTipo)" class="btn btn-outline-primary float-end  box-shadow mb-3" id="btnAgregarDireccion"><i class="fa-solid fa-plus"></i> Agregar {{ selTipo }}</button>
                    </div>
                </div>
            </div>
            <div class="row" style="border-radius: 10px; overflow-x: hidden;">
                <table class="table table-borderless table-striped table-responsive  box-shadow">
                    <thead>
                        <tr class="bg-primary bg-opacity-75 text-white">
                            <th class="ps-2">Lista de productos</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let mat of lsmat.materialesCotizacion">
                            <td>
                                <div class="row pb-2 text-center">
                                    <div class="col-md-2 col-sm-4 col-3">
                                        <span class="badge text-dark text-center">Clave:</span>
                                        <div class="text-center">{{ mat.claveProducto }}</div>
                                        <small>{{ mat.descripcionPuesto }}</small>
                                    </div>
                                    <div class="col-md-3 col-sm-8 col-9">
                                        <span class="badge text-dark">Producto:</span>
                                        <div class="ms-2">{{ mat.descripcionMaterial }}</div>
                                        <small>{{ mat.nombreSucursal }}</small>
                                    </div>
                                    <div class="col-md-1 col-sm-4 col-3">
                                        <span class="badge text-dark">Precio:</span>
                                        <div class="ms-2">${{ mat.precioUnitario | number: '0.2' }}</div>
                                    </div>
                                    <div class="col-md-1 col-sm-4 col-3">
                                        <span class="badge text-dark">Cantidad:</span>
                                        <div class="ms-2">{{ mat.cantidad | number: '0.0' }}</div>
                                    </div>
                                    <div class="col-md-2 col-sm-6 col-3">
                                        <span class="badge text-dark">Frecuencia:</span>
                                        <div class="ms-2">{{ mat.idFrecuencia }}</div>
                                    </div>
                                    <div class="col-md-1 col-sm-4 col-3">
                                        <span class="badge text-dark">Total:</span>
                                        <div class="ms-2">${{ mat.cantidad * mat.precioUnitario | number: '0.2' }}</div>
                                    </div>
                                    <div class="col-md-2 col-sm-4 col-3">
                                        <span class="badge text-dark">Fecha Alta:</span>
                                        <div class="ms-2">{{ mat.fechaAlta | date: 'dd/MM/yyyy' }}</div>
                                    </div>
                                </div>
                            </td>
                            <td class="align-middle w-auto">
                                <a class="btn btn-sm text-primary mb-1" (click)="selNewMat(mat.idMaterialCotizacion, selTipo, mat.edit = 1)" data-bs-toggle="tooltip" title="Editar">
                                    <i class="fa-solid fa-pencil fa-2x"></i>
                                </a>
                                <a class="btn btn-sm text-danger mb-1" (click)="removeMat(mat.idMaterialCotizacion)" data-bs-toggle="tooltip" title="Eliminar">
                                    <i class="fa-solid fa-times fa-2x"></i>
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <pagina-widget [pagina]="lsmat.pagina" [numPaginas]="lsmat.numPaginas" [rows]="lsmat.rows" (chgEvent)="matPagina($event)"></pagina-widget>
            </div>


        </div>
        <div class="tab-pane fade" id="servicio" role="tabpanel" aria-labelledby="plantilla-tab">
            <ng-container *ngIf="lsser?.serviciosCotizacion?.length > 0">
                <div class="row" style="border-radius: 10px; overflow-x: hidden;">
                    <table class="table table-borderless table-striped table-responsive  box-shadow">
                        <thead>
                            <tr class="bg-primary bg-opacity-75 text-white">
                                <th class="ps-2">General (cotización)</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <ng-container *ngFor="let ser of lsser.serviciosCotizacion">
                                <tr *ngIf="ser.idDireccionCotizacion == 0">
                                    <td>
                                        <div class="row pb-2 text-center">
                                            <div class="col-md-1 col-sm-4" style="display: none;">
                                                <span class="badge text-dark text-center">idServicio:</span>
                                                <div class="text-center">{{ ser.idServicioExtra }}</div>
                                            </div>
                                            <div class="col-md-3 col-sm-6 col-8">
                                                <span class="badge text-dark">Servicio:</span>
                                                <div class="ms-2 text-center">{{ ser.servicioExtra }}</div>
                                            </div>

                                            <div class="col-md-2 col-sm-4 col-4">
                                                <span class="badge text-dark">Costo:</span>
                                                <div class="ms-2 text-center">${{ ser.precioUnitario | number: '0.2' }}</div>
                                            </div>
                                            <div class="col-md-1 col-sm-4 col-3">
                                                <span class="badge text-dark">Cantidad:</span>
                                                <div class="ms-2 text-center">{{ ser.cantidad | number: '0.0' }}</div>
                                            </div>
                                            <div class="col-md-2 col-sm-4 col-3">
                                                <span class="badge text-dark">Frecuencia:</span>
                                                <div class="ms-2 text-center">{{ ser.idFrecuencia }}</div>
                                            </div>
                                            <div class="col-md-2 col-sm-4 col-3 text-center">
                                                <span class="badge text-dark ">Total:</span>
                                                <div class="ms-2 ">${{ ser.cantidad * ser.precioUnitario | number: '0.2' }}</div>
                                            </div>
                                            <div class="col-md-2 col-sm-4 col-3">
                                                <span class="badge text-dark">Fecha Alta:</span>
                                                <div class="ms-2 text-center">{{ ser.fechaAlta | date: 'dd/MM/yyyy' }}</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="align-middle w-auto">
                                        <a class="btn btn-sm text-primary mb-1" (click)="servicio(ser.idServicioExtraCotizacion)" data-bs-toggle="tooltip" title="Editar">
                                            <i class="fa-solid fa-pencil fa-2x"></i>
                                        </a>
                                        <a class="btn btn-sm text-danger mb-1" (click)="eliSer(ser.idServicioExtraCotizacion)" data-bs-toggle="tooltip" title="Eliminar">
                                            <i class="fa-solid fa-times fa-2x"></i>
                                        </a>
                                    </td>
                                </tr>
                            </ng-container>
                        </tbody>
                    </table>
                </div>
            </ng-container>
            <br />

            <ng-container *ngIf="lsser?.serviciosCotizacion?.length > 0">
                <div class="row" style="border-radius: 10px; overflow-x: hidden;">
                    <table class="table table-borderless table-striped table-responsive  box-shadow">
                        <thead>
                            <tr class="bg-primary bg-opacity-75 text-white">
                                <th class="ps-2">Por directorio</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <ng-container *ngFor="let ser of lsser.serviciosCotizacion">
                                <tr *ngIf="ser.idDireccionCotizacion != 0">
                                    <td>
                                        <div class="row pb-2 text-center">
                                            <div class="col-md-1 col-sm-4" style="display: none;">
                                                <span class="badge text-dark text-center">idServicio:</span>
                                                <div class="text-center">{{ ser.idServicioExtra }}</div>
                                            </div>
                                            <div class="col-md-3 col-sm-6 col-8">
                                                <span class="badge text-dark">Servicio:</span>
                                                <div class="ms-2 text-center">{{ ser.servicioExtra }}</div>
                                                <small>{{ ser.direccion }}</small>
                                            </div>
                                            <div class="col-md-2 col-sm-4 col-4 text-center">
                                                <span class="badge text-dark">Costo:</span>
                                                <div class="ms-2 text-center">${{ ser.precioUnitario | number: '0.2' }}</div>
                                            </div>
                                            <div class="col-md-1 col-sm-4 col-3">
                                                <span class="badge text-dark">Cantidad:</span>
                                                <div class="ms-2 text-center">{{ ser.cantidad | number: '0.0' }}</div>
                                            </div>
                                            <div class="col-md-2 col-sm-4 col-3">
                                                <span class="badge text-dark">Frecuencia:</span>
                                                <div class="ms-2 text-center">{{ ser.idFrecuencia }}</div>
                                            </div>
                                            <div class="col-md-2 col-sm-4 col-3">
                                                <span class="badge text-dark">Total:</span>
                                                <div class="ms-2 text-center">${{ ser.cantidad * ser.precioUnitario | number: '0.2' }}</div>
                                            </div>
                                            <div class="col-md-2 col-sm-4 col-3">
                                                <span class="badge text-dark">Fecha Alta:</span>
                                                <div class="ms-2 text-center">{{ ser.fechaAlta | date: 'dd/MM/yyyy' }}</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="align-middle w-auto">
                                        <a class="btn btn-sm text-primary mb-1" (click)="servicio(ser.idServicioExtraCotizacion)" data-bs-toggle="tooltip" title="Editar">
                                            <i class="fa-solid fa-pencil fa-2x"></i>
                                        </a>
                                        <a class="btn btn-sm text-danger mb-1" (click)="eliSer(ser.idServicioExtraCotizacion)" data-bs-toggle="tooltip" title="Eliminar">
                                            <i class="fa-solid fa-times fa-2x"></i>
                                        </a>
                                    </td>
                                </tr>
                            </ng-container>
                        </tbody>
                    </table>
                </div>
            </ng-container>

            <div>
                <div class="row float-end">
                    <div>
                        <button type="button" (click)="servicio(0)" class="btn btn-outline-primary float-end  box-shadow" id="btnAgregarDireccion"><i class="fa-solid fa-plus"></i> Agregar servicio</button>
                    </div>
                </div>
            </div>
            <br />
            <br />
            <br />
            <!--<pagina-widget [pagina]="lsser.pagina" [numPaginas]="lsser.numPaginas" [rows]="lsser?.serviciosCotizacion?.rows" (chgEvent)="matPagina($event)"></pagina-widget>-->
        </div>
    </div>
    <br />
    <br />
    <br />
    <button type="button" class="btn btn-primary btn-bottom-right box-shadow" (click)="goBack()">Volver</button>
</div>


<direc-widget (smEvent)="saveDir($event)"></direc-widget>
<pues-widget (smEvent)="savePlan($event)"></pues-widget>
<mate-widget (smEvent)="newMate($event)"></mate-widget>
<mateadd-widget (smEvent)="saveMate($event)" (returnModal)="return($event)"></mateadd-widget>
<servadd-widget (smEvent)="getServ()"></servadd-widget>
<actualizacotizacion-widget (valida)="actualizarIndirectoUtilidad()"></actualizacotizacion-widget>
<elimina-widget [titulo]="" [mensaje]="" (ansEvent)="elimina($event)"></elimina-widget>
<eliminadirectorio-widget [titulo]="" [mensaje]="" (EventDC)="eliminaDireccionCotizacion($event)"></eliminadirectorio-widget>
<eliminaOperario-widget [titulo]="" [mensaje]="" (ansEvent)="elimina($event)"></eliminaOperario-widget>



<!--<mateoperarioadd-widget (m2Event)="opeMat($event)"></mateoperarioadd-widget>-->
<!--<servadd-widget (servEvent)="guardar($event)"></servadd-widget>-->
